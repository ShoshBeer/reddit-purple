async function injectScript(){const[e]=await chrome.tabs.query({active:!0});chrome.storage.session.get((function(t){chrome.storage.session.set({...t,[e.id]:!1})})),chrome.scripting.executeScript({target:{tabId:e.id},files:["./inject_script.js"]}).then((()=>{chrome.scripting.executeScript({target:{tabId:e.id},files:["./foreground.bundle.js"]})}))}chrome.webNavigation.onCompleted.addListener(injectScript,{url:[{urlMatches:"reddit.com/r/[^/]+/comments/[^/]+"}]}),chrome.storage.session.setAccessLevel({accessLevel:"TRUSTED_AND_UNTRUSTED_CONTEXTS"}),chrome.runtime.onInstalled.addListener((()=>{chrome.action.setBadgeText({text:"OFF"})})),chrome.runtime.onMessage.addListener((async e=>{const[t]=await chrome.tabs.query({active:!0});if("toggle"===e){const e=!0!==(await chrome.storage.session.get({[t.id]:!1}))[t.id];!0===e?(await chrome.scripting.insertCSS({files:["displayPosts.css"],target:{tabId:t.id}}),chrome.storage.session.get((function(e){chrome.storage.session.set({...e,[t.id]:!0})}))):!1===e&&(await chrome.scripting.removeCSS({files:["displayPosts.css"],target:{tabId:t.id}}),chrome.storage.session.get((function(e){chrome.storage.session.set({...e,[t.id]:!1})})))}})),chrome.runtime.onMessage.addListener((async e=>{const[t]=await chrome.tabs.query({active:!0});"object"==typeof e&&e[t.url]>9&&chrome.action.setBadgeText({tabId:t.id,text:"ON"})}));